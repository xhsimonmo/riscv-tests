/* Automatically generated by litmus */

void test_body(int pid) {
  switch(pid) {
    case 0: {
      
      arch_barrier_up();
      delay(test.delays[0]*12);
      
      asm volatile (
        " li a0,1      \n"
        " sw a0,0( %0) \n"
        "fence         \n"
        " li a1,1      \n"
        " sw a1,0( %1) \n"
      : /* output operands */
        
      : /* input operands */
        "r"(test.vars[0]),"r"(test.vars[1])
      : /* clobbered registers */
        "a0","a1"
      );
      arch_barrier_down();
      break;
    }
    case 1: {
      var_t out0,out1;
      arch_barrier_up();
      delay(test.delays[1]*12);
      
      asm volatile (
        " lw %0,0( %2) \n"
        "fence         \n"
        " lw %1,0( %3) \n"
        "              \n"
        "              \n"
      : /* output operands */
        "=&r"(out0),"=&r"(out1)
      : /* input operands */
        "r"(test.vars[1]),"r"(test.vars[0])
      );
      test.outcome[0] = out0;
      test.outcome[1] = out1;
      arch_barrier_down();
      break;
    }
  }
}
